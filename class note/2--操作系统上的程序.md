## 什么是程序

本质是状态机，例如C语言状态机模型

- 状态 = 堆 + 栈
- 初始状态 = main语句
- 状态迁移 = 执行一条语句
  1. 任何 C 程序都可以改写成 “非复合语句” 的 C 代码
  2. [真的有这种工具](https://cil-project.github.io/cil/) (C Intermediate Language) 和[解释器](https://gitlab.com/zsaleeba/picoc)

C 程序的状态机模型 (语义，semantics)

- 状态 = stack frame 的列表 (每个 frame 有 PC) + 全局变量
- 初始状态 = main(argc, argv), 全局变量初始化
- 迁移 = 执行 top stack frame PC 的语句; PC++
  - 函数调用 = push frame (frame.PC = 入口)
  - 函数返回 = pop frame

------

应用：将任何递归程序就地转为非递归

- 汉诺塔难不倒你 [hanoi-nr.c](https://jyywiki.cn/pages/OS/2022/demos/hanoi-nr.c)
- A → B, B → A 的也难不倒你
  - 还是一样的 `call()`，但放入不同的 `Frame`

